{% extends 'halls/base.html'%}

{% block content %}

<section class='jumbotron text-center custom-font'>

  <h1 class='jumbotron-heading'> Welcome to RNMC Videos! </h1>

  <p class='lead text-muted mt-4'>
    <em>Log in, create galleries of yout favourite Youtube videos,
    share them with everyone.</em>
  </p>
  <p class='lead text-muted'>
  <em>That simple!</em>
  </p>
  <p>
    <a href="{% url 'create_gallery' %}"
       class='btn btn-outline-primary btn-lg mt-3 shadow'>
      Get started!
    </a>
  </p>
</section>

<div class="container">

  <h1 class='text-center custom-font'> Popular galleries </h1>

  {% for gallery in popular_galleries %}

  <div class="row mt-4">
    <div class="col-12 text-center custom-font">
      <h2 class='mb-3'>
        <a class='custom-font' href="{% url 'detail_gallery' gallery.id %}">
        {{ gallery.title }}
        </a>
        <span class='text-muted by-username'>
          by {{ gallery.user.username }}
        </span>
      </h2>
    </div>
  </div>

    <div class="row text-center">

    {% for video in gallery.video_set.all %}

      <div class="col-12 col-md-6 col-lg-4 col-xl-3 mt-4">
        <div class="card mb-3 shadow-md">'
          <iframe width="100%" height="225"
                  src="https://www.youtube.com/embed/{{ video.youtube_id }}"
                  frameborder="0" allow="accelerometer; autoplay; encrypted-media;
                  gyroscope; picture-in-picture" allowfullscreen>
          </iframe>
          <div class="card-body text-center">
            <p class="card-text custom-font">
              {{ video.title }}
            </p>
          </div>
        </div>
      </div>

    {% endfor %}

    </div>

  <hr>

  {% endfor %}

  <h1 class='text-center custom-font mt-4'> Recent galleries </h1>

  {% for gallery in recent_galleries %}

  <div class="row mt-4">
    <div class="col-12 text-center custom-font">
      <h2 class='mb-3'>
        <a class='custom-font' href="{% url 'detail_gallery' gallery.id %}">
        {{ gallery.title }}
        </a>
        <span class='text-muted by-username'>
          by {{ gallery.user.username }}
        </span>
      </h2>
    </div>
  </div>

    <div class="row text-center">

    {% for video in gallery.video_set.all %}

      <div class="col-12 col-md-6 col-lg-4 col-xl-3 mt-4">
        <div class="card mb-3 shadow-md">'
          <iframe width="100%" height="225"
                  src="https://www.youtube.com/embed/{{ video.youtube_id }}"
                  frameborder="0" allow="accelerometer; autoplay; encrypted-media;
                  gyroscope; picture-in-picture" allowfullscreen>
          </iframe>
          <div class="card-body text-center">
            <p class="card-text custom-font">
              {{ video.title }}
            </p>
          </div>
        </div>
      </div>

    {% endfor %}

    </div>

  <hr>

  {% endfor %}

</div>

{% endblock %}
